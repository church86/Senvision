import java.io.File;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.net.URL;

import org.apache.commons.io.FileUtils;

import com.opencsv.CSVReader;
import com.opencsv.CSVWriter;

public class StockFetcher {

	static String[] tickername = { "INTC", "AAPL", "MRK ", "PG ", "WMT ", "BA", "JPM", "GOOGL " };

	public static String tickerToName(String tickerCompName) {
		String compname = tickerCompName;
		switch (tickerCompName) {
		case "INTC":
			compname = "Intel";
			break;
		case "AAPL":
			compname = "Apple";
			break;
		case "MRK ":
			compname = "Merck";
			break;
		case "WMT ":
			compname = "Walmart";
			break;
		case "PG ":
			compname = "p&g";
			break;
		case "BA":
			compname = "Boeing";
			break;
		case "JPM":
			compname = "Morgan Chase";
			break;
		case "GOOGL ":
			compname = "Google";
			break;
		case "GOOGL":
			compname = "Google";
			break;
		}
		return compname;
	}

	public static void fetchStock(int finalDateYear, int finalDateMonth, int finalDateday, int startDateYear,
			int startDateMonth, int startDateDay, String outputfolder) throws IOException {
		for (String stockSymbol : tickername) {

			String url = "http://ichart.finance.yahoo.com/table.csv?" + "s=" + stockSymbol + "&d=" + finalDateMonth
					+ "&e=" + finalDateday + "&f=" + finalDateYear + "&g=d&a=" + startDateMonth + "&b=" + startDateDay
					+ "&c=" + startDateYear + "&ignore=.csv";

			// String
			// url="http://ichart.finance.yahoo.com/table.csv?s=AAPL&d=9&e=12&f=2013&g=d&a=8&b=7&c=1984&ignore=.csv";
			URL website;
			website = new URL(url);
			File f = new File("../stock_data/auto_pulled_data/" + tickerToName(stockSymbol) + ".csv");
			FileUtils.copyURLToFile(website, f);
			
		}

	}

	public static void addTwitterDatetoFile(String inputfile,String outputfile) throws IOException{
		CSVReader cR = new CSVReader(new FileReader(inputfile));
		CSVWriter cW = new CSVWriter(new FileWriter(outputfile));
		String[] nextLine;
		for((nextLine=cR.readNext())!=null){
			
		}
	}
	
	
	
	public static void main(String[] args) throws IOException {
		fetchStock(2016, 10, 1, 2016, 8, 7, "");
	}
}
